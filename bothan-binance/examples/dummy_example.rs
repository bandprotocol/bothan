use tracing_subscriber::fmt::init;

use bothan_binance::BinanceService;

#[tokio::main]
async fn main() {
    init();
    let test = &[
        "btcusdt",
        "ethusdt",
        "bnbusdt",
        "neousdt",
        "ltcusdt",
        "qtumusdt",
        "adausdt",
        "xrpusdt",
        "eosusdt",
        "tusdusdt",
        "iotausdt",
        "xlmusdt",
        "ontusdt",
        "trxusdt",
        "etcusdt",
        "icxusdt",
        "nulsusdt",
        "vetusdt",
        "usdcusdt",
        "linkusdt",
        "wavesusdt",
        "ongusdt",
        "hotusdt",
        "zilusdt",
        "zrxusdt",
        "fetusdt",
        "batusdt",
        "xmrusdt",
        "zecusdt",
        "iostusdt",
        "celrusdt",
        "dashusdt",
        "omgusdt",
        "thetausdt",
        "enjusdt",
        "maticusdt",
        "atomusdt",
        "tfuelusdt",
        "oneusdt",
        "ftmusdt",
        "algousdt",
        "dogeusdt",
        "duskusdt",
        "ankrusdt",
        "winusdt",
        "cosusdt",
        "mtlusdt",
        "dentusdt",
        "keyusdt",
        "dockusdt",
        "wanusdt",
        "funusdt",
        "cvcusdt",
        "chzusdt",
        "bandusdt",
        "xtzusdt",
        "renusdt",
        "rvnusdt",
        "hbarusdt",
        "nknusdt",
        "stxusdt",
        "kavausdt",
        "arpausdt",
        "iotxusdt",
        "rlcusdt",
        "ctxcusdt",
        "bchusdt",
        "troyusdt",
        "viteusdt",
        "fttusdt",
        "eurusdt",
        "ognusdt",
        "drepusdt",
        "wrxusdt",
        "lskusdt",
        "bntusdt",
        "ltousdt",
        "mblusdt",
        "cotiusdt",
        "stptusdt",
        "datausdt",
        "solusdt",
        "ctsiusdt",
        "hiveusdt",
        "chrusdt",
        "btcupusdt",
        "btcdownusdt",
        "ardrusdt",
        "mdtusdt",
        "stmxusdt",
        "kncusdt",
        "lrcusdt",
        "pntusdt",
        "compusdt",
        "scusdt",
        "zenusdt",
        "snxusdt",
        "ethupusdt",
        "ethdownusdt",
        "vthousdt",
        "dgbusdt",
        "sxpusdt",
        "mkrusdt",
        "dcrusdt",
        "storjusdt",
        "bnbupusdt",
        "bnbdownusdt",
        "manausdt",
        "yfiusdt",
        "balusdt",
        "blzusdt",
        "irisusdt",
        "kmdusdt",
        "jstusdt",
        "antusdt",
        "crvusdt",
        "sandusdt",
        "oceanusdt",
        "nmrusdt",
        "dotusdt",
        "lunausdt",
        "rsrusdt",
        "paxgusdt",
        "wnxmusdt",
        "trbusdt",
        "sushiusdt",
        "ksmusdt",
        "egldusdt",
        "diausdt",
        "runeusdt",
        "fiousdt",
        "umausdt",
        "belusdt",
        "wingusdt",
        "uniusdt",
        "oxtusdt",
        "sunusdt",
        "avaxusdt",
        "flmusdt",
        "ornusdt",
        "utkusdt",
        "xvsusdt",
        "alphausdt",
        "aaveusdt",
        "nearusdt",
        "filusdt",
        "injusdt",
        "audiousdt",
        "ctkusdt",
        "akrousdt",
        "axsusdt",
        "hardusdt",
        "straxusdt",
        "unfiusdt",
        "roseusdt",
        "avausdt",
        "xemusdt",
        "sklusdt",
        "grtusdt",
        "juvusdt",
        "psgusdt",
        "1inchusdt",
        "reefusdt",
        "ogusdt",
        "atmusdt",
        "asrusdt",
        "celousdt",
        "rifusdt",
        "truusdt",
        "ckbusdt",
        "twtusdt",
        "firousdt",
        "litusdt",
        "sfpusdt",
        "dodousdt",
        "cakeusdt",
        "acmusdt",
        "badgerusdt",
        "fisusdt",
        "omusdt",
        "pondusdt",
        "degousdt",
        "aliceusdt",
        "linausdt",
        "perpusdt",
        "superusdt",
        "cfxusdt",
        "tkousdt",
        "pundixusdt",
        "tlmusdt",
        "barusdt",
        "forthusdt",
        "bakeusdt",
        "burgerusdt",
        "slpusdt",
        "shibusdt",
        "icpusdt",
        "arusdt",
        "polsusdt",
        "mdxusdt",
        "maskusdt",
        "lptusdt",
        "xvgusdt",
        "atausdt",
        "gtcusdt",
        "ernusdt",
        "klayusdt",
        "phausdt",
        "bondusdt",
        "mlnusdt",
        "dexeusdt",
        "c98usdt",
        "clvusdt",
        "qntusdt",
        "flowusdt",
        "minausdt",
        "rayusdt",
        "farmusdt",
        "alpacausdt",
        "quickusdt",
        "mboxusdt",
        "forusdt",
        "requsdt",
        "ghstusdt",
        "waxpusdt",
        "gnousdt",
        "xecusdt",
        "elfusdt",
        "dydxusdt",
        "idexusdt",
        "vidtusdt",
        "usdpusdt",
        "galausdt",
        "ilvusdt",
        "yggusdt",
        "sysusdt",
        "dfusdt",
        "fidausdt",
        "frontusdt",
        "cvpusdt",
        "agldusdt",
        "radusdt",
        "betausdt",
        "rareusdt",
        "laziousdt",
        "chessusdt",
        "adxusdt",
        "auctionusdt",
        "darusdt",
        "bnxusdt",
        "movrusdt",
        "cityusdt",
        "ensusdt",
        "kp3rusdt",
        "qiusdt",
        "portousdt",
        "powrusdt",
        "vgxusdt",
        "jasmyusdt",
        "ampusdt",
        "plausdt",
        "pyrusdt",
        "rndrusdt",
        "alcxusdt",
        "santosusdt",
        "bicousdt",
        "fluxusdt",
        "fxsusdt",
        "voxelusdt",
        "highusdt",
        "cvxusdt",
        "peopleusdt",
        "ookiusdt",
        "spellusdt",
        "joeusdt",
        "achusdt",
        "imxusdt",
        "glmrusdt",
        "lokausdt",
        "scrtusdt",
        "api3usdt",
        "bttcusdt",
        "acausdt",
        "xnousdt",
        "woousdt",
        "alpineusdt",
        "tusdt",
        "astrusdt",
        "gmtusdt",
        "kdausdt",
        "apeusdt",
        "bswusdt",
        "bifiusdt",
        "multiusdt",
        "steemusdt",
        "mobusdt",
        "nexousdt",
        "reiusdt",
        "galusdt",
        "ldousdt",
        "epxusdt",
        "opusdt",
        "leverusdt",
        "stgusdt",
        "luncusdt",
        "gmxusdt",
        "polyxusdt",
        "aptusdt",
        "osmousdt",
        "hftusdt",
        "phbusdt",
        "hookusdt",
        "magicusdt",
        "hifiusdt",
        "rplusdt",
        "prosusdt",
        "agixusdt",
        "gnsusdt",
        "synusdt",
        "vibusdt",
        "ssvusdt",
        "lqtyusdt",
        "ambusdt",
        "ustcusdt",
        "gasusdt",
        "glmusdt",
        "promusdt",
        "qkcusdt",
        "uftusdt",
        "idusdt",
        "arbusdt",
        "loomusdt",
        "oaxusdt",
        "rdntusdt",
        "wbtcusdt",
        "eduusdt",
        "suiusdt",
        "aergousdt",
        "pepeusdt",
        "flokiusdt",
        "astusdt",
        "sntusdt",
        "combousdt",
        "mavusdt",
        "pendleusdt",
        "arkmusdt",
        "wbethusdt",
        "wldusdt",
        "fdusdusdt",
        "seiusdt",
        "cyberusdt",
        "arkusdt",
        "creamusdt",
        "gftusdt",
        "iqusdt",
        "ntrnusdt",
        "tiausdt",
        "memeusdt",
        "ordiusdt",
        "beamxusdt",
        "pivxusdt",
        "vicusdt",
        "blurusdt",
        "vanryusdt",
        "aeurusdt",
        "jtousdt",
        "1000satsusdt",
        "bonkusdt",
        "aceusdt",
        "nfpusdt",
        "aiusdt",
        "xaiusdt",
        "mantausdt",
        "altusdt",
        "jupusdt",
        "pythusdt",
        "roninusdt",
        "dymusdt",
    ];
    if let Ok(mut service) = BinanceService::default().await {
        let chunks = test.chunks(376);
        for (i, chunk) in chunks.enumerate() {
            let _ = service.get_price_data(chunk).await;
            tokio::time::sleep(tokio::time::Duration::from_secs(1)).await;
        }
        // let _ = service.get_price_data(test).await;

        // let data = service.get_price_data(&["btcusdt", "ethusdt"]).await;

        loop {
            // let data = service.get_price_data(&["btcusdt", "ethusdt"]).await;
            // println!("{:?}", data);
            tokio::time::sleep(tokio::time::Duration::from_secs(10)).await;
        }
    }
}
